[server]
domain = grafana.smigula.io
root_url = https://grafana.smigula.io
serve_from_sub_path = true
protocol = http
enable_gzip = true

[security]
admin_user = mmurphy
# admin_password is set via environment variable
csrf_trusted_origins = https://grafana.smigula.io

[users]
allow_sign_up = false
allow_org_create = false

[auth]
disable_login_form = false
disable_signout_menu = false
oauth_allow_insecure_email_lookup = false

[auth.anonymous]
enabled = false
org_role = Viewer

[auth.generic_oauth]
enabled = true
name = Authentik
icon = signin
client_id = lxEIE09Ya7A8m2PSAIMpLVLMpFBtHQMwxLPC2KlE
# client_secret is set via environment variable
scopes = openid email profile
empty_scopes = false
email_claim = email
login_claim = preferred_username
name_claim = name
auth_url = https://auth.smigula.io/application/o/authorize/
token_url = https://auth.smigula.io/application/o/token/
api_url = https://auth.smigula.io/application/o/userinfo/
signout_redirect_url = https://auth.smigula.io/application/o/grafana/end-session/
# Role mapping based on groups claim
role_attribute_path = contains(groups[*], 'Grafana Admins') && 'Admin' || contains(groups[*], 'Grafana Editors') && 'Editor' || 'Viewer'
groups_attribute_path = groups
# OAuth settings
allow_sign_up = true
auto_login = false
tls_skip_verify_insecure = false
use_pkce = true
use_refresh_token = true
# ID token settings
id_token_attribute_name = 
# Organization settings
org_attribute_path = 
org_mapping = 
allowed_organizations = 
team_ids_attribute_path = 
# Disable proxy auth
[auth.proxy]
enabled = false